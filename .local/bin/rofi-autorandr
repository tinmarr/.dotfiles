#!/usr/bin/env bash
# Rofi script to quickly switch been autorandr setups

options=$(autorandr --list)
declare -i index=1

if [[ -n "$(autorandr --current)" ]]; then 
    while [[ $index -le $(echo "$options" | wc -l) ]]; do
        if [[ $(echo "$options" | head -n $index | tail -n 1) == "$(autorandr --current)" ]]; then
            break;
        fi
        index+=1
    done
fi

layout=$(echo -e "auto\n${options}" | rofi -dmenu -i -selected-row $index -p "Choose Layout:")
case "$layout" in
    auto)
        autorandr -c
        ;;
    *)
        autorandr -l "$layout" 
        ;;
esac
